<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Sistema de Diagnóstico - Impresora HP DeskJet 2723</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1, h2 {
      text-align: center;
    }
    .question {
      margin: 20px 0;
      font-size: 18px;
      font-weight: bold;
    }
    .answers {
      margin: 10px 0;
    }
    label {
      margin-right: 20px;
    }
    #nextBtn {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 4px;
    }
    #nextBtn:hover {
      background: #0056b3;
    }
    #result {
      margin-top: 30px;
      padding: 15px;
      background: #e0ffe0;
      border: 1px solid #00cc00;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Diagnóstico de la Impresora</h1>
    <div id="questionContainer">
      <!-- Aquí se inyectarán las preguntas y conclusiones dinámicamente -->
    </div>
    <div id="result"></div>
  </div>

  <script>
    /***********************************************************************
     * 1. DEFINICIÓN DE NODOS (REGLAS Y CONCLUSIONES)
     ***********************************************************************/

    /*
      Cada nodo tiene:
      - id: identificador único
      - type: "question" o "conclusion"
      - text: texto a mostrar (pregunta o conclusión)
      - yes: (opcional) id del siguiente nodo si la respuesta es "Sí"
      - no:  (opcional) id del siguiente nodo si la respuesta es "No"

      En este ejemplo, se ha construido un "camino" simplificado para ilustrar
      cómo encadenar preguntas y llegar a conclusiones.
    */

    const nodes = {
      // Nodo inicial
      start: {
        id: "start",
        type: "question",
        text: "¿La impresora enciende correctamente?",
        yes: "q1",
        no: "c0"
      },

      // Conclusión si la impresora no enciende
      c0: {
        id: "c0",
        type: "conclusion",
        text: "Posible problema de alimentación. Verifique cable de alimentación, enchufe y botón de encendido."
      },

      // Pregunta 1
      q1: {
        id: "q1",
        type: "question",
        text: "¿La luz Wi-Fi está encendida (fija o parpadeando)?",
        yes: "q2",
        no: "c1"
      },

      // Conclusión: Luz Wi-Fi apagada
      c1: {
        id: "c1",
        type: "conclusion",
        text: "La impresora no está conectada a Wi-Fi. Solución: Reiniciar el modo de configuración inalámbrica."
      },

      // Pregunta 2
      q2: {
        id: "q2",
        type: "question",
        text: "¿La luz Wi-Fi parpadea en azul?",
        yes: "c2",
        no: "q3"
      },

      // Conclusión: Modo configuración Wi-Fi
      c2: {
        id: "c2",
        type: "conclusion",
        text: "La impresora está en modo de configuración Wi-Fi. Use la app HP Smart para finalizar la conexión."
      },

      // Pregunta 3
      q3: {
        id: "q3",
        type: "question",
        text: "¿El indicador luminoso de tinta está encendido?",
        yes: "c3",
        no: "q4"
      },

      // Conclusión: Problema de tinta
      c3: {
        id: "c3",
        type: "conclusion",
        text: "El nivel de tinta es bajo o hay un problema con el cartucho. Solución: Revisar o reemplazar el cartucho."
      },

      // Pregunta 4
      q4: {
        id: "q4",
        type: "question",
        text: "¿La impresión sale borrosa o con rayas?",
        yes: "c4",
        no: "q5"
      },

      // Conclusión: Limpieza de cabezal
      c4: {
        id: "c4",
        type: "conclusion",
        text: "Los inyectores del cartucho pueden estar obstruidos. Solución: Realizar limpieza del cabezal de impresión."
      },

      // Pregunta 5
      q5: {
        id: "q5",
        type: "question",
        text: "¿Hay un atasco de papel?",
        yes: "c5",
        no: "q6"
      },

      // Conclusión: Atasco de papel
      c5: {
        id: "c5",
        type: "conclusion",
        text: "Retire el papel atascado con cuidado y reinicie la impresora."
      },

      // Pregunta 6
      q6: {
        id: "q6",
        type: "question",
        text: "¿La impresora no responde a ningún comando?",
        yes: "c6",
        no: "q7"
      },

      // Conclusión: Reinicio general
      c6: {
        id: "c6",
        type: "conclusion",
        text: "La impresora podría necesitar un reinicio. Apáguela, espere 10 segundos y enciéndala de nuevo."
      },

      // Pregunta 7
      q7: {
        id: "q7",
        type: "question",
        text: "¿La calidad de impresión es mala (hojas en blanco o tinta irregular)?",
        yes: "q8",
        no: "c9"
      },

      // Pregunta 8
      q8: {
        id: "q8",
        type: "question",
        text: "¿El cartucho de color o negro está vacío?",
        yes: "c7",
        no: "c8"
      },

      // Conclusión: Reemplazar cartuchos
      c7: {
        id: "c7",
        type: "conclusion",
        text: "Reemplace el cartucho vacío o dañado y pruebe nuevamente."
      },

      // Conclusión: Revisar instalación cartuchos
      c8: {
        id: "c8",
        type: "conclusion",
        text: "Verifique que los cartuchos estén bien instalados y que el papel sea de buena calidad."
      },

      // Conclusión final si no se detectan problemas
      c9: {
        id: "c9",
        type: "conclusion",
        text: "No se detecta un problema específico según las respuestas. Consulte la guía de usuario o soporte de HP."
      }
    };


    /***********************************************************************
     * 2. LÓGICA DE NAVEGACIÓN (RED DE INFERENCIA)
     ***********************************************************************/

    // Estado actual
    let currentNodeId = "start";

    // Referencias al DOM
    const questionContainer = document.getElementById("questionContainer");
    const resultDiv = document.getElementById("result");

    // Función para renderizar el nodo actual (pregunta o conclusión)
    function loadNode(nodeId) {
      currentNodeId = nodeId;
      const node = nodes[nodeId];

      // Limpiar contenedor
      questionContainer.innerHTML = "";
      resultDiv.innerHTML = "";

      if (node.type === "question") {
        // Mostrar pregunta y opciones Sí/No
        const questionEl = document.createElement("div");
        questionEl.classList.add("question");
        questionEl.textContent = node.text;
        questionContainer.appendChild(questionEl);

        // Contenedor para radio buttons
        const answersEl = document.createElement("div");
        answersEl.classList.add("answers");
        answersEl.innerHTML = `
          <label>
            <input type="radio" name="answer" value="yes" /> Sí
          </label>
          <label>
            <input type="radio" name="answer" value="no" /> No
          </label>
        `;
        questionContainer.appendChild(answersEl);

        // Botón para continuar
        const nextBtn = document.createElement("button");
        nextBtn.id = "nextBtn";
        nextBtn.textContent = "Siguiente";
        nextBtn.addEventListener("click", () => {
          const selected = document.querySelector('input[name="answer"]:checked');
          if (!selected) {
            alert("Por favor, selecciona Sí o No.");
            return;
          }
          const answer = selected.value; // "yes" o "no"
          goToNextNode(node, answer);
        });
        questionContainer.appendChild(nextBtn);

      } else if (node.type === "conclusion") {
        // Mostrar la conclusión
        const conclusionEl = document.createElement("div");
        conclusionEl.id = "result";
        conclusionEl.innerHTML = `<h2>Conclusión:</h2><p>${node.text}</p>`;
        questionContainer.appendChild(conclusionEl);
      }
    }

    // Función para decidir el siguiente nodo
    function goToNextNode(node, answer) {
      if (answer === "yes") {
        // Puede ser un nodo pregunta o conclusión
        const nextId = node.yes;
        if (nextId) {
          loadNode(nextId);
        } else {
          // No hay siguiente nodo definido para "yes"
          questionContainer.innerHTML = "<p>No se encontró el siguiente paso (YES).</p>";
        }
      } else {
        // Respuesta "no"
        const nextId = node.no;
        if (nextId) {
          loadNode(nextId);
        } else {
          // No hay siguiente nodo definido para "no"
          questionContainer.innerHTML = "<p>No se encontró el siguiente paso (NO).</p>";
        }
      }
    }

    // Cargar el nodo inicial
    loadNode(currentNodeId);
  </script>
</body>
</html>
